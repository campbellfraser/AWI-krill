AWIhover = data.frame(c("<h3 style='font-weight'='bold','font-size=15px'>Alfred Wegener Institute</h3>",53.53330956163785,8.580558417739011))
View(AWIhover)
AWIhover = data.frame(r("<h3 style='font-weight'='bold','font-size=15px'>Alfred Wegener Institute</h3>",53.53330956163785,8.580558417739011))
AWIhover = data.frame("<h3 style='font-weight'='bold','font-size=15px'>Alfred Wegener Institute</h3>",53.53330956163785,8.580558417739011)
View(AWIhover)
AWIhover = data.frame(Name = "<h3 style='font-weight'='bold','font-size=15px'>Alfred Wegener Institute</h3>", Lat = 53.53330956163785, Long = 8.580558417739011)
View(AWIhover)
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(~Long, ~Lat, label = AWIhover$Name)
AWI
AWIhover = data.frame(Name = "style='font-weight'='bold','font-size=15px'>Alfred Wegener Institute", Lat = 53.53330956163785, Long = 8.580558417739011)
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(~Long, ~Lat, label = AWIhover$Name)
AWI
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(~Long, ~Lat, label = AWIhover$Name, labelOptions = labelOptions(style = list("font-weight" = "bold",
"font-size" = "16px",
"box-shadow" = "3px 3px rgba(0,0,0,0.25)"))))
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(~Long, ~Lat, label = AWIhover$Name, labelOptions = labelOptions(style = list("font-weight" = "bold",
"font-size" = "16px",
"box-shadow" = "3px 3px rgba(0,0,0,0.25)")))
AWI
AWIhover = data.frame(Name = "Alfred Wegener Institute", Lat = 53.53330956163785, Long = 8.580558417739011)
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(~Long, ~Lat, label = AWIhover$Name,
labelOptions = labelOptions(style = list("font-weight" = "bold",
"font-size" = "16px",
"box-shadow" = "3px 3px rgba(0,0,0,0.25)")))
AWI
AWI = leaflet(AWIhover) %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(8.580558417739011, 53.53330956163785, label = "Alfred Wegener Insitute",
labelOptions = labelOptions(style = list("font-weight" = "bold",
"font-size" = "16px",
"box-shadow" = "3px 3px rgba(0,0,0,0.25)")))
AWI
AWI = leaflet() %>%
setView(lng=8.580558417739011, lat=53.53330956163785, zoom=12) %>%
addProviderTiles(providers$CartoDB.Positron) %>%
addMarkers(8.580558417739011, 53.53330956163785, label = "Alfred Wegener Insitute",
labelOptions = labelOptions(style = list("font-weight" = "bold",
"font-size" = "16px",
"box-shadow" = "3px 3px rgba(0,0,0,0.25)")))
AWI
shapiro.test(seasonalLipids$Lipids)
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD))
MONTHkrill = dplyr::filter(krillYEAR,grepl("-08-",date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,"08",MONTHsd))
}
source("prerequisites.R")
inspectaMonth = readline(prompt="Months: ") %>%
strsplit("[[:space:]]") %>%
unlist()
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD)) #Filter into one year, since I need to record the year
for (j in inspectaMonth){
MONTHkrill = dplyr::filter(krillYEAR,grepl(paste0("-",j,"-"),date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,j,MONTHsd,MONTHsum))
}
}
colnames(seasonalLipids) = c("Year","Lipids","Month","SD","Total")
seasonalLipids$Lipids = as.numeric(seasonalLipids$Lipids)
seasonalLipids$Month = as.factor(seasonalLipids$Month)
seasonalLipids$SD = as.numeric(seasonalLipids$SD)
seasonalLipids$Total = as.numeric(seasonalLipids$Total)
seasonalLipids[seasonalLipids==0] = NA
krillCocktail = ggplot(seasonalLipids,aes(x=Year,y=Lipids,fill=Month)) +
geom_bar(stat="identity",position=position_dodge(0.9)) +
scale_fill_discrete(labels=allMonthsLong[as.numeric(inspectaMonth)]) +
geom_errorbar(aes(ymin=Lipids,ymax=Lipids+SD),position=position_dodge(0.9),width=0.2) +
ggtitle("Mean omega-3 Content of Krill Stomachs") +
labs(y="Mean Omega-3 Content (mg)")
# 1-WAY ANOVA testing if there is a significant difference between Aug each year ####
# Assumptions: the observations are independent, the data are normally distributed (shapiro test), and the data has a homogeneity of variance (levene's test)
shapiro.test(seasonalLipids$Lipids) # p-val < 0.05, non-normal
leveneTest(Lipids~Year,seasonalLipids) # p-val <<<< 0.05, non-homogeneous
inspectaMonth = readline(prompt="Months: ") %>%
strsplit("[[:space:]]") %>%
unlist()
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD)) #Filter into one year, since I need to record the year
for (j in inspectaMonth){
MONTHkrill = dplyr::filter(krillYEAR,grepl(paste0("-",j,"-"),date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,j,MONTHsd,MONTHsum))
}
}
colnames(seasonalLipids) = c("Year","Lipids","Month","SD","Total")
seasonalLipids$Lipids = as.numeric(seasonalLipids$Lipids)
seasonalLipids$Month = as.factor(seasonalLipids$Month)
seasonalLipids$SD = as.numeric(seasonalLipids$SD)
seasonalLipids$Total = as.numeric(seasonalLipids$Total)
seasonalLipids[seasonalLipids==0] = NA
# 1-WAY ANOVA testing if there is a significant difference between Aug each year ####
# Assumptions: the observations are independent, the data are normally distributed (shapiro test), and the data has a homogeneity of variance (levene's test)
shapiro.test(seasonalLipids$Lipids) # p-val < 0.05, non-normal
leveneTest(Lipids~Year,seasonalLipids) # p-val <<<< 0.05, non-homogeneous
inspectaMonth = readline(prompt="Months: ") %>%
strsplit("[[:space:]]") %>%
unlist()
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD)) #Filter into one year, since I need to record the year
for (j in inspectaMonth){
MONTHkrill = dplyr::filter(krillYEAR,grepl(paste0("-",j,"-"),date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,j,MONTHsd,MONTHsum))
}
}
colnames(seasonalLipids) = c("Year","Lipids","Month","SD","Total")
seasonalLipids$Lipids = as.numeric(seasonalLipids$Lipids)
seasonalLipids$Month = as.factor(seasonalLipids$Month)
seasonalLipids$SD = as.numeric(seasonalLipids$SD)
seasonalLipids$Total = as.numeric(seasonalLipids$Total)
seasonalLipids[seasonalLipids==0] = NA
# 1-WAY ANOVA testing if there is a significant difference between Aug each year ####
# Assumptions: the observations are independent, the data are normally distributed (shapiro test), and the data has a homogeneity of variance (levene's test)
shapiro.test(seasonalLipids$Lipids) # p-val < 0.05, non-normal
leveneTest(Lipids~Year,seasonalLipids) # p-val <<<< 0.05, non-homogeneous
leveneTest(Lipids~Year,seasonalLipids,na.omit(Lipids)) # p-val <<<< 0.05, non-homogeneous
leveneTest(Lipids~Year,seasonalLipids,na.omit(seasonalLipids$Lipids)) # p-val <<<< 0.05, non-homogeneous
leveneTest(Lipids~Year,seasonalLipids) # p-val <<<< 0.05, non-homogeneous
View(seasonalLipids)
inspectaMonth = readline(prompt="Months: ") %>%
strsplit("[[:space:]]") %>%
unlist()
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD)) #Filter into one year, since I need to record the year
for (j in inspectaMonth){
MONTHkrill = dplyr::filter(krillYEAR,grepl(paste0("-",j,"-"),date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,j,MONTHsd,MONTHsum))
}
}
colnames(seasonalLipids) = c("Year","Lipids","Month","SD","Total")
seasonalLipids$Lipids = as.numeric(seasonalLipids$Lipids)
seasonalLipids$Month = as.factor(seasonalLipids$Month)
seasonalLipids$SD = as.numeric(seasonalLipids$SD)
seasonalLipids$Total = as.numeric(seasonalLipids$Total)
seasonalLipids[seasonalLipids==0] = NA
View(seasonalLipids)
# 1-WAY ANOVA testing if there is a significant difference between Aug each year ####
# Assumptions: the observations are independent, the data are normally distributed (shapiro test), and the data has homogeneity of variance (levene's test)
shapiro.test(seasonalLipids$Lipids) # p-val < 0.05, non-normal
leveneTest(Lipids~Year,seasonalLipids) # p-val NAN, that's surely not a good thing
# Penguin diet
source("prerequisites.R")
peng30mm = read.csv("pengDiets_30mm_agg.csv")
View(peng30mm)
with(peng30mm, plot(yr~pMean))
with(peng30mm, plot(pMean~yr))
gg1 = ggplot(peng30mm,aes(x="yr",y="pMean",fill="mo")) +
geom_bar(stat="identity",position=position_dodge()) +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD),position=position_dodge()) +
labs(y="Mean recruitment",x="Year")
gg1
remove(gg1)
remove(peng30mm$X)
library(tibble)
library(abind)
detach("package:abind", unload = TRUE)
remove.packages("tidyverse", lib="~/R/win-library/4.1")
remove.packages("anyflights", lib="~/R/win-library/4.1")
# create a list of all installed packages
ip <- as.data.frame(installed.packages())
head(ip)
# if you use MRO, make sure that no packages in this library will be removed
ip <- subset(ip, !grepl("MRO", ip$LibPath))
# we don't want to remove base or recommended packages either\
ip <- ip[!(ip[,"Priority"] %in% c("base", "recommended")),]
# determine the library where the packages are installed
path.lib <- unique(ip$LibPath)
# create a vector with all the names of the packages you want to remove
pkgs.to.remove <- ip[,1]
head(pkgs.to.remove)
# remove the packages
sapply(pkgs.to.remove, remove.packages, lib = path.lib)
install.packages("devtools")
install.packages("devtools")
library(devtools)
devtools::install_github("tidyverse/tidyverse")
library(tidyverse)
install.packages("pacman")
install.packages("janitor")
# Penguin diet
source("prerequisites.R")
# Penguin diet
source("prerequisites.R")
peng30mm = read.csv("pengDiets_30mm_agg.csv")
peng30tibble = read_csv("pengDiets_30mm_agg.csv",col_select=c(pMean,pSD,yr,mo,spp))
View(peng30tibble)
remove(c(peng30mm,peng30tibble))
remove(peng30mm)
remove(peng30tibble)
peng30mm = read_csv("pengDiets_30mm_agg.csv",col_select=c(pMean,pSD,yr,mo,spp))
peng30mm$yr = as.factor(peng30mm$yr)
peng30mm$mo = as.factor(peng30mm$mo)
peng30mm$spp = as.factor(peng30mm$spp)
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSd)) +
ggtitle("Krill recruitment") +
gglabs(x="Year",y="Recruitment")
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSd)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity",position=position_dodge()) +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(dplyr::filter(peng30mm,grepl(11,mo)),aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(dplyr::filter(peng30mm,grepl(1,mo)),aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(dplyr::filter(peng30mm,grepl(12,mo)),aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity",position=position_dodge()) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean) +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
labs(x="Year",y="Recruitment")
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar = ggplot(peng30mm,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengFiltered = peng30mm
pengFiltered$yr %>% as.numeric()
pengFiltered %>% as.numeric(yr)
pengFiltered$yr = as.numeric(pengFiltered$yr)
pengFiltered$yr %>% as.factor()
pengFiltered = pengFiltered %>%
filter(yr > 2011)
pengFiltered = peng30mm
pengFiltered$yr = as.numeric(pengFiltered$yr)
View(pengFiltered)
View(peng30mm)
peng30mm = read_csv("pengDiets_30mm_agg.csv",col_select=c(pMean,pSD,yr,mo,spp))
pengFiltered = pengFiltered %>%
filter(yr > 2010)
View(peng30mm)
pengFiltered = peng30mm
pengFiltered$yr
filter(peng30mm, yr>2000)
filter(peng30mm, yr>2010)
pengFiltered = peng30mm %>%
filter(yr > 2010)
View(pengFiltered)
peng2011on = peng30mm %>%
filter(yr > 2010)
pengBar = ggplot(peng2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
peng2011on$yr = as.factor(peng2011on$yr)
pengBar = ggplot(peng2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#  geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
pengBar = ggplot(peng2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
inspectaMonth = readline(prompt="Months: ") %>%
strsplit("[[:space:]]") %>%
unlist()
seasonalLipids = data.frame()
for (i in years){
krillYEAR = dplyr::filter(krill,grepl(as.character(i),date.YMD)) #Filter into one year, since I need to record the year
for (j in inspectaMonth){
MONTHkrill = dplyr::filter(krillYEAR,grepl(paste0("-",j,"-"),date.YMD))
MONTHsum = sum(MONTHkrill$Lipids,na.rm=TRUE)
MONTHmean = MONTHsum/length(MONTHkrill$date.YMD)
MONTHsd = sd(MONTHkrill$Lipids,na.rm=TRUE)
seasonalLipids = rbind(seasonalLipids,c(i,MONTHmean,j,MONTHsd,MONTHsum))
}
}
colnames(seasonalLipids) = c("Year","Lipids","Month","SD","Total")
seasonalLipids$Lipids = as.numeric(seasonalLipids$Lipids)
seasonalLipids$Month = as.factor(seasonalLipids$Month)
seasonalLipids$SD = as.numeric(seasonalLipids$SD)
seasonalLipids$Total = as.numeric(seasonalLipids$Total)
seasonalLipids[seasonalLipids==0] = NA
krillCocktail = ggplot(seasonalLipids,aes(x=Year,y=Lipids,fill=Month)) +
geom_bar(stat="identity",position=position_dodge(0.9)) +
scale_fill_discrete(labels=allMonthsLong[as.numeric(inspectaMonth)]) +
geom_errorbar(aes(ymin=Lipids,ymax=Lipids+SD),position=position_dodge(0.9),width=0.2) +
ggtitle("Mean omega-3 Content of Krill Stomachs") +
labs(y="Mean Omega-3 Content (mg)")
krillCocktail
krillCocktailSum = ggplot(seasonalLipids,aes(x=Year,y=Total,fill=Month)) +
geom_bar(stat="identity",position=position_dodge(0.9)) +
scale_fill_discrete(labels=allMonthsLong[as.numeric(inspectaMonth)]) +
ggtitle("Total omega-3 Content of Krill Stomachs") +
labs(y="Total Omega-3 Content (mg)")
krillCocktailSum
peng2011on = add_row(pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
add_row(peng2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng2011on = peng30mm %>% # Filter to only include the years we have lipid data for (2011 onwards)
filter(yr > 2010)
add_row(peng2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
View(pengFiltered)
add_row(peng2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng2011on = peng30mm %>% # Filter to only include the years we have lipid data for (2011 onwards)
filter(yr > 2010)
peng2011on = peng30mm %>% # Filter to only include the years we have lipid data for (2011 onwards)
filter(yr > 2010) %>%
add_row(peng2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng2011on %>%
add_row(pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng2011on = add_row(peng2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng2011on$yr = as.factor(peng2011on$yr)
View(peng2011on)
pengBar = ggplot(peng2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar
krillCocktailSum
plot_grid(pengBar,krillCocktail)
plot_grid(pengBar,krillCocktail,ncol=1)
krillCocktail = ggplot(seasonalLipids,aes(x=Year,y=Lipids)) +
geom_bar(stat="identity",position=position_dodge(0.9)) +
scale_fill_discrete(labels=allMonthsLong[as.numeric(inspectaMonth)]) +
geom_errorbar(aes(ymin=Lipids,ymax=Lipids+SD),position=position_dodge(0.9),width=0.2) +
ggtitle("Mean omega-3 Content of Krill Stomachs") +
labs(y="Mean Omega-3 Content (mg)")
krillCocktail
plot_grid(pengBar,krillCocktail,ncol=1)
peng44mm = read_csv("pengDiets_44mm_agg.csv",col_select=c(pMean,pSD,yr,mo,spp))
remove(peng2011on)
peng30mm2011on = peng30mm %>% # Filter to only include the years we have lipid data for (2011 onwards)
filter(yr > 2010)
peng30mm2011on = add_row(peng30mm2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng30mm2011on$yr = as.factor(peng30mm2011on$yr)
pengBar30mm = ggplot(peng30mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
peng44mm = read_csv("pengDiets_44mm_agg.csv",col_select=c(pMean,pSD,yr,mo,spp))
peng44mm2011on = peng44mm %>%
filter(yr > 2010)
peng44mm2011on = add_row(peng44mm2011on, pMean=NA,pSD=NA,yr=2021,mo=NA,spp=NA)
peng44mm2011on$yr = as.factor(peng44mm2011on$yr)
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar44mm
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar44mm
peng44mm2011on$mo = as.factor(peng44mm2011on$mo)
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean,fill=mo)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar44mm
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar44mm
krill_pal = hue_pal()(12)
krill_pal[1]
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity",fill="#F8766D") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment") +
labs(x="Year",y="Recruitment")
pengBar44mm
krill_bar[2]
krill_pal[2]
krill_pal[4]
plot_grid(ncol=1,pengBar30mm,pengBar44mm)
pengBar30mm = ggplot(peng30mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity",fill="#7CAE00") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment (30mm threshhold)") +
labs(x="Year",y="Recruitment")
plot_grid(ncol=1,pengBar30mm,pengBar44mm)
pengBar44mm = ggplot(peng44mm2011on,aes(x=yr,y=pMean)) +
geom_bar(stat="identity",fill="#F8766D") +
#geom_errorbar(aes(ymin=pMean-pSD,ymax=pMean+pSD)) +
ggtitle("Krill recruitment (44mm threshhold)") +
labs(x="Year",y="Recruitment")
plot_grid(ncol=1,pengBar30mm,pengBar44mm)
plot_grid(ncol=1,pengBar30mm,pengBar44mm,krillCocktail)
krillINFO = data.frame()
remove(krillINFO)
krillINFO = tibble()
for (i in years){
lipidYear = dplyr::filter(krill,grepl(as.character(i),date.YMD))
lipidTotal = sum(lipidYear$Lipids)
lipidMean = yearTotal/length(lipidYear$Lipids)
penguinYear = dplyr::filter(peng44mm,yr=i)
penguinTotal = sum(penguinYear$pMean)
penguinMean = penguinTotal/length(penguinYear$pMean)
krillINFO = add_row(year=i,meanLipids=lipidMean,recruitment=penguinMean)
}
for (i in years){
lipidYear = dplyr::filter(krill,grepl(as.character(i),date.YMD))
lipidTotal = sum(lipidYear$Lipids)
lipidMean = lipidTotal/length(lipidYear$Lipids)
penguinYear = dplyr::filter(peng44mm,yr=i)
penguinTotal = sum(penguinYear$pMean)
penguinMean = penguinTotal/length(penguinYear$pMean)
krillINFO = add_row(year=i,meanLipids=lipidMean,recruitment=penguinMean)
}
for (i in years){
lipidYear = dplyr::filter(krill,grepl(as.character(i),date.YMD))
lipidTotal = sum(lipidYear$Lipids)
lipidMean = lipidTotal/length(lipidYear$Lipids)
penguinYear = dplyr::filter(peng44mm,yr==i)
penguinTotal = sum(penguinYear$pMean)
penguinMean = penguinTotal/length(penguinYear$pMean)
krillINFO = add_row(year=i,meanLipids=lipidMean,recruitment=penguinMean)
}
